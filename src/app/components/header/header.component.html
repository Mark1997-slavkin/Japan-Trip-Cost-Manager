<header class="header">
  <div class="header-content">
    <div class="title-section">
      <h1 class="title">Trip Budget Manager</h1>
      <div class="country-input-wrapper">
        <span class="country-currency-badge">{{
          selectedCountry.currencySymbol
        }}</span>
        <input
          type="text"
          class="country-input"
          [value]="showCountrySelector ? searchQuery : selectedCountry.name"
          (focus)="openCountrySelector()"
          (input)="filterCountries($any($event.target).value)"
          placeholder="Search country..."
        />
        <div class="country-dropdown" *ngIf="showCountrySelector">
          <button
            *ngFor="let country of filteredCountries"
            class="country-option"
            [class.selected]="country.code === selectedCountry.code"
            (click)="selectCountry(country)"
          >
            <span class="country-name">{{ country.name }}</span>
            <span class="country-currency-code"
              >{{ country.currencySymbol }} ({{ country.currency }})</span
            >
          </button>
          <div class="no-results" *ngIf="filteredCountries.length === 0">
            No countries found
          </div>
        </div>
      </div>
    </div>

    <div class="budget-section">
      <div
        *ngIf="currentBudget === 0 && creditBudget === 0"
        class="budget-form"
      >
        <div class="budget-inputs">
          <div class="budget-input-group">
            <p class="budget-label">Cash Budget</p>
            <div class="input-group">
              <span class="currency-symbol">{{
                selectedCountry.currencySymbol
              }}</span>
              <input
                type="number"
                #budgetInput
                placeholder="0"
                class="budget-input"
              />
            </div>
          </div>
          <div class="budget-input-group">
            <p class="budget-label">Credit Budget</p>
            <div class="input-group">
              <span class="currency-symbol">{{
                selectedCountry.currencySymbol
              }}</span>
              <input
                type="number"
                #creditInput
                placeholder="0"
                class="budget-input"
              />
            </div>
          </div>
        </div>
        <button
          (click)="setBudgets(+budgetInput.value, +creditInput.value)"
          class="btn btn-primary"
        >
          Set
        </button>
        <p class="error-message" *ngIf="budgetError">{{ budgetError }}</p>
      </div>

      <div *ngIf="currentBudget > 0 || creditBudget > 0" class="budget-display">
        <div class="budget-numbers">
          <p class="budget-amount">
            <span class="budget-label-small">Cash Budget</span>
            <span class="amount"
              >{{ selectedCountry.currencySymbol
              }}{{ currentBudget | number }}</span
            >
          </p>
          <p class="budget-amount credit">
            <span class="budget-label-small">Credit Budget</span>
            <span class="amount"
              >{{ selectedCountry.currencySymbol
              }}{{ creditBudget | number }}</span
            >
          </p>
        </div>
      </div>
      <button
        (click)="budgetService.setBudget(0); budgetService.setBudget(0, true)"
        class="btn btn-reset"
      >
        Reset
      </button>
    </div>
  </div>
</header>
